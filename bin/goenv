#!/bin/sh

export GOPATH= GOBIN=

if [[ -z $1 ]]; then
  gopath="$PWD"
else
  gopath=($@)
fi

# reverse
for((i=${#gopath[@]}-1; i>=0; i--)); do
  gp="${gopath[$i]}"
  pushd "$gp" > /dev/null
  export GOPATH=$PWD:$GOPATH
  export GOBIN=$PWD/bin:$GOBIN
  export PATH=$GOBIN:$PATH
  popd > /dev/null
done

# cleanup
unset gp gopath

echo "export GOPATH=$GOPATH"
echo "export GOBIN=$GOBIN"
echo "export PATH=$GOBIN:\$PATH"

exec "$SHELL"
